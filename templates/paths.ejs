// THIS FILE IS GENERATED BY CODE GENERATOR. DO NOT CHANGE MANUALLY.
/* tslint:disable */
/* eslint-disable */
const AJV = require('ajv')
const ajv = new AJV({ unknownFormats: ['int32', 'float', 'int64'] })
const json = require('./schema.json')

const operationHash = Object.values(json.paths).reduce((acc, ac) => {
  for (const operation of Object.values(ac)) {
    const { operationId, responses } = operation
    const targetResponse = responses['200'] || responses['201']
    if (!targetResponse) continue

    acc[operationId] = {
      params: {}, // TODO
      response: targetResponse.content['application/json'].schema
    }
  }
  return acc
}, {})

function validate (schema, data) {
  const valid = ajv.validate(schema, data)
  if (!valid) throw new Error(ajv.errorsText())
  return valid
}
<% paths.forEach(({ funcName, name }) => { %>
exports.<%= funcName %> = function (data) {
  const operation = operationHash['<%= name %>']
  const response = operation ? operation.response : {}
  return validate(response, data)
}
<% }); %>